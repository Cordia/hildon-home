2010-07-29  Adam Endrodi <adam.endrodi@blumsoft.eu>

	Make waitidle compatible with libhildondesktop 2.1.42,
	and disable it by default.  this allows for independent
	releasing of hildon-home with the waitidle feature and
	libhildondesktop with the necessary enablers.

	* src/hildon-home.c:
	  Recognize the Waitidle::enabled configuration parameter.
	* src/home.conf.in:
	  Move comments around.
	* src/hd-task-shortcut.c (hd_task_shortcut_desktop_file_changed_cb):
	  Check the existence of the "throttled" property before getting
	  its value to prevent the emission of warnings.

2010-07-08  Adam Endrodi <adam.endrodi@blumsoft.eu>

	Release 0.3.70-1.

2010-07-07  Adam Endrodi <adam.endrodi@blumsoft.eu>

	NB#162298 hildon-sv-notification-daemon memory leak during long chat.

	* src/hd-sv-notification-daemon.c (hd_sv_notification_daemon_stop_event):
	  Free the invocation context.

2010-07-05  Adam Endrodi <adam.endrodi@blumsoft.eu>

	NB#127188 3PO: Uninstalled applications are still present in the
		  Add Widget list

	* src/hd-applet-manager.c:
	  -- load_desktop_widget_from_desktop_file(): always dup
	     the gettext()ed string
	  -- items_configuration_loaded_cb(): remove those entries
	     not anymore in @plugins from @installed_plugins
	  -- plugin_module_removed_cb(): remove the removed plugin
	     from the Add widget list as well.

2010-06-21  Adam Endrodi <adam.endrodi@blumsoft.eu>

	NB#137880 Selecting bookmark is slow to launch site, resulting
		  in multiple clicks and multiple browser instances

	Don't show the widgets as long as the load is high.
	Configurable via /etc/hildon-desktop/home.conf.
	Also initiate the application-loading transition rather than
	waiting for the application when opening a web bookmark.

	* debian/control:
	  Depend on new version of libhildondesktop.
	* src/home.conf.in:
	  New configuration settings.
	* src/hd-applet-manager.c (plugin_added_cb):
	  If hd_applet_manager_throttled() keep a list of @throttled_plugins
	  and only gtk_widget_show() them when we're ready.
	* src/hd-task-shortcut.c (hd_task_shortcut_desktop_file_changed_cb):
	  Don't show the shortcut if the HDShortcuts is throttled.
	* src/hildon-home.c (waitidle):
	  Right when entering the main loop start watching the CPU activity,
	  show the idle-percentage on a banner and show the widgets when it
	  reaches the desired level.
	* src/hd-shortcut-widgets.c (hd_shortcut_widgets_launch_task):
	  Replaced...
	* src/hd-dbus-utils.c (hd_utils_launch_task):
	  ...by this...
	* src/hd-bookmark-shortcut.c (hd_bookmark_shortcut_activate):
	  ...and used by this.
	* src/hd-shortcut-widgets.c (hd_shortcut_widgets_get_app_mgr_proxy):
	  Removed as unused.

2010-06-10  Adam Endrodi <adam.endrodi@blumsoft.eu>

	Release 0.3.69.

2010-06-10  Adam Endrodi <adam.endrodi@blumsoft.eu>

	NB#159589 Change background. Logical ID for 'Get more from Ovi Store'
		  "home_li_get_ovi"

	* src/hd-available-backgrounds.c (hd_available_backgrounds_run):
	  Use explicit message catalog with dgettext() because plugins
	  may decide to change the default.

2010-05-25  Adam Endrodi <adam.endrodi@blumsoft.eu>

	Release 0.3.68.

2010-06-04  Adam Endrodi <adam.endrodi@blumsoft.eu>

	NB#172384 hildon-home leaks X resources: Pixmaps during generic use

	* src/hd-incoming-event-window.c (hd_incoming_event_window_realize):
	  Once passed to the notification window, release the background
	  pixmap.

2010-05-25  Adam Endrodi <adam.endrodi@blumsoft.eu>

	Release 0.3.67.

2010-05-07  Adam Endrodi <adam.endrodi@blumsoft.eu>

	NB#162675 desktop recompilation with G_DISABLE_CAST_CHECKS

	* configure.ac: add to $CFLAGS

2010-02-19  Adam Endrodi <adam.endrodi@blumsoft.eu>

	Release 0.3.66-2.

2010-02-18  Adam Endrodi <adam.endrodi@blumsoft.eu>

	For NB#154984: commit uncommitted work when the display goes off

	* src/hd-notification-manager.c (hd_notification_manager_db_commit_now)
	* src/hd-incoming-events.c (hd_incoming_events_system_bus_signal_handler)

2010-02-18  Marc Ordinas i Llopis <marc.ordinasillopis@collabora.co.uk>

	Release 0.3.66-1.

2010-02-18  Marc Ordinas i Llopis <marc.ordinasillopis@collabora.co.uk>

	Fixes: NB#155462 - Ovi Store Promotional links to themes and backgrounds

	* src/hd-available-backgrounds.c
	* src/hd-background.h
	* src/hd-change-background-dialog.c
	* src/hd-dbus-utils.c
	* src/hd-dbus-utils.h

2010-02-18  Adam Endrodi <adam.endrodi@blumsoft.eu>

	NB#155904 Task Switcher is not glowing after reboot in case of
		  new unread SMS message

	We didn't exit cleanly when we received the shutdown_ind signal.

	* src/hd-hildon-home-dbus.c (hd_hildon_home_system_bus_signal_handler):
	  Only quit the main loop, not main(), and let it clean up.

2010-02-17  Adam Endrodi <adam.endrodi@blumsoft.eu>

	Send ActionInvoked signals without a concrete destination.
	The unique names we used as destinations become invalid after
	rebooting so the intended address didn't get it eventually.

	* src/hd-notification-manager.c (hd_notification_manager_create_signal):
	  Don't specify a concrete destination.

2010-02-17  Adam Endrodi <adam.endrodi@blumsoft.eu>

	NB#152279 Tapping grouped message preview doesn't bring
		  conversation to foreground

	Because we just sent GroupMessageInvoked but messaging-ui needs
	ActionInvoked.  So send both of them, just in case.

	* src/hd-incoming-events.c:
	  Make it possible for D-Bus-Callback to have a list of values,
	  and recognize "default" to indicate sending the ActionInvoked
	  signal.

2010-02-08  Adam Endrodi <adam.endrodi@blumsoft.eu>

	Release 0.3.65-1.

2010-02-04  Adam Endrodi <adam.endrodi@blumsoft.eu>

	Release 0.3.65.

2010-02-04  Adam Endrodi <adam.endrodi@blumsoft.eu>

	NB#154418 Text in chat-invitation notifications is unchangeable

	* src/notification-groups.conf:
	  Copied [chat-invitation] to [group-chat-invitation] with
	  a different Secondary-Text.

2009-12-18  Jan Arne Petersen  <jpetersen@openismus.com>

	Release 0.3.62.

2009-12-18  Jan Arne Petersen  <jpetersen@openismus.com>

	Fix length of NULL-terminated string array.

	Fixes: NB#151417 - Hildon Crashes always in a scenario

	* src/hd-search-service.c: Fix length of NULL-terminated string array.

2009-12-17  Jan Arne Petersen  <jpetersen@openismus.com>

	Release 0.3.61.

2009-12-17  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#150971 - hildon-home crashed while changing background.

	* src/hd-available-backgrounds.c: Unref models correctly.

2009-12-17  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#149133 - Remove doc files from hildon-home deb

	* debian/rules: disable dh_installdocs.

2009-12-14  Jan Arne Petersen  <jpetersen@openismus.com>

	Release 0.3.60.

2009-12-14  Jan Arne Petersen  <jpetersen@openismus.com>

	Strip spaces in path values from keyfiles

	Fixes: NB#148916 - Hildon-home crashes always when trying to change
	custom wallpaper

	* src/hd-imageset-background.c: Strip spaces in path values.

2009-12-04  Jan Arne Petersen  <jpetersen@openismus.com>

	Release 0.3.59

2009-12-04  Jan Arne Petersen  <jpetersen@openismus.com>

	Add support for wallpaper backgrounds.

	Fixes: NB#145131 - Support full size background jpeg files

	* src/Makefile.am:
	* src/hd-activate-views-dialog.c:
	* src/hd-background.c:
	* src/hd-background.h:
	* src/hd-backgrounds.c:
	* src/hd-backgrounds.h:
	* src/hd-change-background-dialog.c:
	* src/hd-dbus-utils.c:
	* src/hd-dbus-utils.h:
	* src/hd-led-pattern.c:
	* src/hd-pixbuf-utils.c:
	* src/hd-pixbuf-utils.h:
	* src/hd-search-service.c:
	* src/hd-search-service.h:
	* src/hd-wallpaper-background.c:
	* src/hd-wallpaper-background.h: Add support for wallpaper
	backgrounds.

2009-12-03  Jan Arne Petersen  <jpetersen@openismus.com>

	Do not install /usr/share/doc files.

	Fixes: NB#149133 - Remove doc files from hildon-home deb.

	* debian/rules (DEB_DH_INSTALLCHANGELOGS_ARGS): Do not generate
	/usr/share/doc/*/changelog.gz files.

2009-12-01  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#142790 - Group chat invitation notifications are not
	implemented

	* src/notification-groups.conf: Add chat-invitation category.

2009-12-01  Jan Arne Petersen  <jpetersen@openismus.com>

	Add support for live search in dialogs.

	* src/hd-applet-manager.c:
	* src/hd-bookmark-widgets.c:
	* src/hd-shortcut-widgets.c:
	* src/hd-widgets.c:
	* src/hd-widgets.h: Add get_text_column method.

	* src/hd-install-widgets-dialog.c: Set "text-column" property

	* src/hd-change-background-dialog.c: Set "text-column" property.

2009-11-12  Jan Arne Petersen  <jpetersen@openismus.com>

	Release 0.3.58

2009-11-12  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#146369 - theme change dialog shoudl be open for longer time
	till the theme change is completely applied.

	* src/hd-edit-mode-menu.c: Run theme change dialog with
	g_spawn_command_line_async.

2009-11-10  Jan Arne Petersen  <jpetersen@openismus.com>

	Release 0.3.57

2009-11-06  Jan Arne Petersen  <jpetersen@openismus.com>

	Release 0.3.56

2009-11-06  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#135795 - Desktop hanged in a mentioned scenario.

	* src/hd-edit-mode-menu.c:
	* src/hd-edit-mode-menu.h:
	* src/Makefile.am: Extract edit mode menu into an own widget.
	Override GtkWidgetClass->show to only show if no other modal dialog is
	shown.

	* src/hd-hildon-home-dbus.c: Use new HDEditModeMenu.

2009-11-06  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#142515 - Increase in memory usage of hildon-home while
	changing theme from layout mode.

	* src/hd-command-thread-pool.c:
	* src/hd-command-thread-pool.h: A thread pool which supports different
	commands.

	* src/Makefile.am: Add new source files.

	* src/hd-backgrounds.c: Restart hildon-home on theme change. Use
	HDCommandThreadPool.
	* src/hd-backgrounds.h: Add hd_backgrounds_set_image_set function to
	set an image set.

	* src/hd-change-background-dialog.c: Use hd_backgrounds_set_image_set
	for image sets.

	* src/hildon-home.c: Clean hildon-home stamp when hildon-home is
	quit on prupose.

2009-11-04  Jan Arne Petersen  <jpetersen@openismus.com>

	Release 0.3.55

2009-11-04  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#123966 - Already closed notifications are displayed

	* configure.ac:
	* debian/control: Depend on new libhildondesktop.

	* src/hd-incoming-events.c (notifications_new_for_notification,
	  show_preview_window): Check if notifications were already closed.

	* src/test-notifications.py: Update for test.

2009-11-04  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#128853 - list not scrolling to selected item

	* src/hd-change-background-dialog.c (scroll_to_selected,
	add_image_dialog_response): Scroll to selected item in an idle
	handler.

2009-11-04  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: 143078 - Missed call icon in notifications should use phone app
	icon

	* src/notification-groups.conf: Use general_application_call instead
	of general_missed as the missed call icon.

2009-11-04  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#127501 - Task Switcher timestamp not rounded correctly.

	* src/hd-time-difference.c:
	* src/hd-time-difference.h: Add hd_time_difference_get_text and
	hd_time_difference_get_timeout helper functions (with unit tests) to
	handle time difference display (and timeout for next update).

	* src/Makefile.am: Add src/hd-time-difference.[ch] to SOURCES.

	* src/hd-incoming-event-window.c
	(hd_incoming_event_window_update_time): Us the new hd_time_difference


2009-11-03  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Release 0.3.54
	* configure.ac: 0.3.54 

2009-11-02  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#131297 and NB#142916

	* configure.ac:
	* debian/control: Depends on new libhildondesktop.

	* src/hd-bookmark-shortcut.c: Add fallback for thumbnail when the
	thumbnail icon is not available.

	* src/hd-bookmark-widgets.c: Use new functions to handle bookmark
	shortcut creation and deletion in libhildondesktop.

2009-10-28  Jan Arne Petersen  <jpetersen@openismus.com>

	Release 0.3.53

2009-10-28  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#144239 - Shortcut of customized application is missing after
	device restart

	* src/hd-shortcut-widgets.c (hd_shortcut_widgets_load_desktop_file):
	  Use symoblic constants for icon size.
	  (hd_shortcut_widgets_is_available):
	* src/hd-shortcut-widgets.h (hd_shortcut_widgets_is_available): Add
	  new function to check if .desktop file was already scanned.

	* src/hd-task-shortcut.c (load_icon_from_absolute_path,
	  load_icon_from_theme, load_default_icon, load_icon_from_icon_name,
	  hd_task_shortcut_desktop_file_changed_cb, hd_task_shortcut_show,
	  hd_task_shortcut_class_init): Show shortcut as soon as .desktop file
	  is changed. Also show icon when icon is not available.

2009-10-13  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Release 0.3.52
	* configure.ac: 0.3.52

2009-10-13  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-applet-manager.c (hd_applet_manager_setup_column_renderes):
	Center the widgets in the Add widget again. Fix regression.

2009-10-13  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#139471 - Hildon-home crash when moving large number of
	bookmarks
	Fixes: NB#142632 - hildon-home crashes (sefgault) when receiving a
	custom notification

	* src/hd-bookmark-widgets.c (hd_bookmark_widgets_add_bookmark_item):
	Check if bookmark name is NULL and do not crash in that case.

	* src/hd-incoming-events.c (notifications_get_category_info): Support
	custom notifications without a category set.

	* debian/changelog: Update.

2009-10-12  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Release 0.3.51
	* configure.ac: 0.3.51

2009-10-12  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#109885 - First item in any list is selected by default

	* src/hd-install-widgets-dialog.c:
	* src/hd-install-widgets-dialog.h: Add common dialog for installing
	all kind of widgets. Do not select the first item by default.

	* src/hd-widgets.c:
	* src/hd-widgets.h: Add methods to allow using the new common dialog
	for installing.

	* src/hd-applet-manager.c:
	* src/hd-applet-manager.h:
	* src/hd-bookmark-widgets.c:
	* src/hd-bookmark-widgets.h:
	* src/hd-task-manager.c:
	* src/hd-task-manager.h:
	* src/hd-task-shortcut.c: Use the new common HDWidgets class to allow
	using the common dialog.

	* src/hd-hildon-home-dbus.c:
	* src/hildon-home.c:
	* src/Makefile.am: Required changes.

	* debian/changelog: Update.

2009-10-12  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#138509 - Preview notification text has white drop shadow

	* src/hd-incoming-event-window.c
	(hd_incoming_event_window_class_init): Remove shadows from rc parse
	string.

2009-10-11  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#134370 - Icon is not shown for the newly added image in the
	'choose background dialog'.

	* src/hd-change-background-dialog.c
	  (hd_change_background_dialog_append_backgrounds,
	  request_thumbnail_for_uri, hd_change_background_dialog_constructed,
	  add_image_dialog_response): Add support for thumbnail for newly
	  added image.

2009-10-09  Jan Arne Petersen  <jpetersen@openismus.com>

	Release 0.3.50
	* configure.ac: 0.3.50

2009-10-09  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#130557 - LED continusly blinks though clear the
	notifications from task switcher

	* src/hd-incoming-events.c
	  (_HDIncomingEventsPrivate::task_switcher_shown,
	  hd_incoming_events_notified,
	  hd_incoming_events_system_bus_signal_handler,
	  filter_property_changed): Do not blink when task switcher is shown
	  and display is on.

	* src/home.safe-set.in: Update.

2009-10-09  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Release 0.3.49
	* configure.ac: 0.3.49

2009-10-08  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#130557 - LED continusly blinks though clear the
	notifications from task switcher

	* src/hd-incoming-events.c (filter_property_changed): Deactivate all
	notification related led patterns when task switcher is shown to fix
	broken behaviour when hildon-home crashed.

	* src/hd-led-pattern.c (hd_led_pattern_deactivate_all):
	* src/hd-led-pattern.h: Add function to deactivate all notification
	related led patterns.

	* debian/changelog: Update.

2009-10-08  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#134569 - Very rarely 'SMS Conversation View' is not opened
	immediately from notification preview if it stays in Task Switcher
	View for a while
	Fixes: NB#126688 - Contact authorization dialog should not be modal

	* src/hd-incoming-events.c (notifications_append,
	  is_notification_sticky, repack_ptr_array, notifications_close_all,
	  notifications_get_amount, notifications_activate,
	  switcher_window_response, preview_window_response): Do not use the
	  defined D-Bus call if notification is in a thread (assigned to a
	  window). Add "sticky" hint (type bool or uchar) which requires
	  notification to be closed explicitly.

	* debian/changelog: Update.

2009-09-30  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Release 0.3.48
	* configure.ac: 0.3.48

2009-09-28  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes memory leaks (NB#127468)

	* src/hd-change-background-dialog.c (get_thumbnail_for_theme,
	  image_set_thumbnail_callback): Add missing gtk_tree_path_free and
	  g_free.

	* src/hd-incoming-events.c (filter_property_changed): Add missing
	XFree.

2009-09-28  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Fix Coverity-found issues.

	* src/hd-backgrounds.c (volume_pre_unmount_cb): Check if
	gnome_vfs_volume_monitor_get_volume_for_path returns NULL. 
	* src/hd-hildon-home-dbus.c (hd_hildon_home_dbus_init): Fix D-Bus
	connection code to make Coverity happy.

2009-09-16  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Release 0.3.47
	* configure.ac: 0.3.47

2009-09-16  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#134673 - Add link dialog shows bookmarks that are not in
	bookmarks

	* src/hd-bookmark-manager.c (hd_bookmark_manager_add_bookmark_item,
	  free_bookmark_item, hd_bookmark_manager_parse_bookmark_files,
	  hd_bookmark_manager_bookmark_files_changed): Add support for
	  isDeleted flag. Fixes memory leak.

2009-09-16  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#138801 - Crash : hildon-home-74E6 observed

	* src/hd-incoming-events.c (hd_incoming_events_notified): Use
	g_signal_connect_object instead of g_signal_connect.

	* debian/changelog: Update.

2009-09-08  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Release 0.3.46
	* configure.ac: 0.3.46

2009-09-08  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#133861 - Led blinking for new sms/chat messages is not
	stopped when task switcher is opened

	* src/hd-incoming-events.c: Use Multi map for unperceived
	notifications to fix proper display of led pattern and disable led
	pattern as soon as task switcher is opened.

	* src/hd-multi-map.c (added):
	* src/hd-multi-map.h (added): Add multi map implementation.

	* src/hd-led-pattern.c (added):
	* src/hd-led-pattern.h (added): Add led pattern class.

	* src/Makefile.am: Add new files.

	* debian/changelog: Update.

2009-08-28  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Release 0.3.45
	* configure.ac: 0.3.45

2009-08-27  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#135486 - Logical string 'home_ti_select_shortcut' in layout
	mode (langauge: finnish)

	* src/hd-add-task-dialog.c (hd_add_task_dialog_init):
	* src/hd-applet-manager.c (items_configuration_loaded_cb): Use
	dgettext instead of gettext so it does not fail when an widget changes
	the default textdomain.

	* debian/changelog: Update.

2009-08-20  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Release 0.3.44
	* configure.ac: 0.3.44

2009-08-20  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#133876 - Add an icon for each preinstalled panorama image
	set to the 'change background' dialog

	* configure.ac:
	* debian/control: Add hildon-thumbnail dependency.

	* src/hd-change-background-dialog.c: Add thumbnails to Change
	background dialog.

	* debian/changelog: Update.

2009-08-18  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Release 0.3.43
	* configure.ac: 0.3.43

2009-08-18  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#133686 - hildon-home and hildon-sv-notify start in wrong
	place

	* debian/hildon-home.install:
	* debian/hildon-home.xsession:
	* debian/hildon-sv-notification-daemon.xsession:
	* debian/rules: Install xsession file for starting
	hildon-sv-notification-daemon in Xsession.d.

	* debian/changelog: Update.

2009-08-18  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#131444 - After restarting device image background is not
	preserved.

	* src/hd-backgrounds.c (set_theme_idle, hd_backgrounds_startup): Set
	current theme on startup.

	* debian/changelog: Update.

2009-08-18  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#133437 - Desktop edit mode application menu does not have
	theme  selector

	* debian/control: Add dependecy for location packages.

	* src/hd-hildon-home-dbus.c (personalization_clicked_cb,
	  hd_hildon_home_dbus_init): Add Themes menu item to desktop menu.

	* debian/changelog: Update.

2009-08-18  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Release 0.3.42
	* configure.ac: 0.3.42

2009-08-18  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#133096 - Hildon-desktop is reducing use-time when device
	sleeps

	* src/hd-incoming-event-window.c (PROP_MESSAGE,
	  hd_incoming_event_window_realize,
	  hd_incoming_event_window_set_property, display_status_changed,
	  hd_incoming_event_window_init): Only update the timne when the
	  display is on.

	* src/hd-incoming-events.c (_HDIncomingEventsPrivate::display_on,
	  DISPLAY_STATUS_CHANGED, LAST_SIGNAL, incoming_events_signals,
	  hd_incoming_events_class_init,
	  hd_incoming_events_system_bus_signal_handler,
	  hd_incoming_events_init, hd_incoming_events_get,
	  hd_incoming_events_get_display_on):
	* src/hd-incoming-events.h: Listen to
	MCE for display status and emits a signal to incoming event windows on
	display status change.

	* src/Makefile.am:
	* src/test-incoming-event.c (deleted): Remove test application.

	* debian/changelog: Update.

2009-08-13  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Release 0.3.41
	* configure.ac: 0.3.41

2009-08-13  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-sv-notification-daemon.c (mlock_process): Disable mlock.

2009-08-13  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#132855 - Hildon-home process is waking up needlessly while
	device is sleeping

	* .empty:
	* Makefile.am:
	* debian/hildon-home.install: Install an empty file into
	/usr/share/applications/hildon-notification to create the directory
	and remove polling.

	* debian/changelog: Update.

2009-08-07  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Release 0.3.40
	* configure.ac: 0.3.40

2009-08-06  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#127303 - Very late or almost unsuccessful ringtone/vibra
	playback on loaded system

	* com.nokia.HildonSVNotificationDaemon.service.in:
	* configure.ac:
	* Makefile.am:
	* src/Makefile.am:
	* src/hd-sv-notification-daemon.xml:
	* src/hd-sv-notification-daemon.c:
	* src/hd-sv-notification-daemon.h: Add new mlocked daemon for the
	sound/vibra plugin.

	* debian/hildon-home.install:
	* debian/hildon-home.xsession:
	* debian/rules (DEB_CONFIGURE_EXTRA_FLAGS):

	* src/hd-incoming-events.c: Use new daemon to play sound/vibra.

	* debian/changelog: Update.

2009-07-30  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Released 0.3.39

	* configure.ac: 0.3.39

2009-07-29  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#130489 - moving Hildon-Home start forward

	* debian/rules: use 18 instead of 20 for hildon-home session start
	script priority.

2009-07-28  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#124888 - Notifications are shown on a locked device

	* src/hd-incoming-events.c (_HDIncomingEventsPrivate::device_locked):
	  Add device locked field.
	  (show_preview_window): Do not show preview windows when device is
	  locked.
	  (hd_incoming_events_system_bus_signal_handler,
	  devlock_mode_get_notify, hd_incoming_events_init): Listen to mce for
	  device locking/unlocking.

2009-07-27  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#129876 - App shortcuts on the Desktop not according to
	latest spec

	* src/hd-task-shortcut.c: Remove label. Add background image. Fix
	leaked pixbuf.

2009-07-17  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	* src/hd-notification-manager.c
	(hd_notification_manager_setup_interface): New function to set up the
	D-Bus proxy.
	(hd_notification_manager_init): Connect to the system bus as well and
	provide the interface there also.

2009-07-07  Aapo Kojo <aapo.kojo@nokia.com>

	Released 0.3.38

	* configure.ac: 0.3.38

2009-07-02  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#123987 - Fix plural localization of notification time

	* src/hd-incoming-event-window.c
	  (hd_incoming_event_window_update_time): Use ngettext for plural
	  translations.

	* src/test-notifications.py (emit_notification): update test.

	* debian/changelog: Update.

2009-07-01  Aapo Kojo <aapo.kojo@nokia.com>

	Released 0.3.37
	
	* configure.ac: 0.3.37

2009-06-30  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-notification-manager.c (hd_notification_manager_load_row,
	  hd_notification_manager_db_load, hd_notification_manager_db_exec,
	  hd_notification_manager_db_create): Fix wrong g_free of sqlite3
	  errors. FIx crashes.

2009-06-30  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#122957 - There is warning message in console when engine
	cannot load bookmark file

	* src/hd-bookmark-manager.c
	  (hd_bookmark_manager_monitor_bookmark_files): Do not use operator
	  bookmark file.

	* debian/changelog: Update.

2009-06-29  Aapo Kojo <aapo.kojo@nokia.com>

	Released 0.3.36

	* configure.ac: 0.3.36

2009-06-29  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#110233 - Possible memory leak in hildon-home

	* src/hd-incoming-event-window.c (hd_incoming_event_window_finalize):
	Fix leaking prov->destination.

	* src/hd-notification-manager.c (hd_notification_manager_db_prepare):
	Fix leaking sqlite prepared statements. Really reuse them.
	  (hd_notification_manager_notify): Fix leaking actions_copy.

	* debian/changelog: Update.

2009-06-29  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes for update of libhildondesktop regarding NB#123171 and
	NB#123195.

	* src/hd-activate-views-dialog.c (hd_activate_views_dialog_init): Put
	in the container.

	* src/hd-applet-manager.c (plugin_module_added_cb,
	  plugin_module_removed_cb): Fix module adding/removing.

	* debian/changelog: Update.

2009-06-22  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Released 0.3.35

	* configure.ac: 0.3.35

2009-06-17  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#120369 - theme is not applied in layoutmode after flash

	* src/hd-hildon-home-dbus.c: Create menu when intialized instead of
	when it is first shown, so it gets notified about theme changes.

2009-06-15  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Released 0.3.34

	* configure.ac: 0.3.34

2009-06-15  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#120367 - hildon-home-76CD-11 crash observed while in layout
	mode
	Fixes: NB#120884 - Dialog for changing wallpaper too high
	Fixes: NB#110192 - Background Image update 'Stop' button does not work
	Fixes: NB#120626 - Number of notifications is not coming in task
	switcher
	Fixes: NB#121964 - Not able to add mediaplayer shortcut  in anyother
	homeview except in second
	Fixes: NB#121635 - Predefined application shortcuts not added to
	correct Home view

	* src/hd-backgrounds.c (ASPECT_RATIO, CACHED_DIR,
	  BACKGROUND_CACHED_PVR, BACKGROUND_CACHED_PNG, change_request_cb,
	  cb_data, background_data_free, pending_requests, size_prepared_cb,
	  create_cached_image, hd_backgrounds_set_background):
	* src/hd-backgrounds.h (parent_class):
	* src/hd-change-background-dialog.c
	  (hd_change_background_dialog_append_backgrounds,
	  add_image_dialog_response, background_set_cb,
	  hd_change_background_dialog_response,
	  hd_change_background_dialog_init): Fix dialog height. Fix progress
	  indicator. Implement scaling wrongly sized images according to the
	  layout guide. Store cached backgrounds with .png extension to fix
	  warning in hildon-desktop.

	* src/hd-incoming-event-window.c
	  (hd_incoming_event_window_update_title_and_amount,
	  hd_incoming_event_window_get_property,
	  hd_incoming_event_window_set_property,
	  hd_incoming_event_window_class_init, hd_incoming_event_window_new):
	  Also set _HILDON_INCOMING_EVENT_NOTIFICATION_AMOUNT if there is only
	  one notification.

	* src/hd-incoming-events.c (notifications_update_window):
	* src/hd-notification-manager.c (idle_emit,
	  hd_notification_manager_notify): Fix crash.

	* src/hd-task-manager.c (TASK_SHORTCUT_VIEW_GCONF_KEY,
	  TASK_SHORTCUT_POSITION_GCONF_KEY, hd_task_manager_install_task):
	  Reset view and position before explicitly adding a shortcut.

	* debian/changelog: Update.

2009-06-15  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Released 0.3.33

	* configure.ac: 0.3.33

2009-06-11  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	* src/hd-hildon-home-dbus.c
	(hd_hildon_home_system_bus_signal_handler): New function to catch
	D-Bus signals on the system bus. Exit hildon-home in case of
	shutdown_ind from DSME.
	(hd_hildon_home_dbus_init): Start listening to DSME signals.

2009-06-08  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#120367 - hildon-home-76CD-11 crash observed while in layout
	mode

	* src/hd-notification-manager.c (hd_notification_manager_timeout,
	  hd_notification_manager_get, idle_emit): Do not emit signals on
	  finalized object.

	* debian/changelog: Update.

2009-06-04  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Released 0.3.32

	* configure.ac: 0.3.32

2009-06-04  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#120772 - Fontsize keep reducing for newly added task
	shortucts

	* src/hd-task-shortcut.c (hd_task_shortcut_init): Copy
	PangoFontDescription before modifying.

	* debian/changelog: Update.

2009-06-04  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#120707 - Time in task switcher for notification not showing
	properly and not updated
	
	* src/hd-incoming-event-window.c (MINUTE, HOUR, DAY, YEAR): Fixes
	macros.

	* debian/changelog: Update.

2009-06-04  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Released 0.3.31

	* configure.ac: 0.3.31

2009-06-03  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#120135 - bookmark widget thumbnail preview misaligned in
	allocated space

	* src/hd-bookmark-shortcut.c (BORDER_WIDTH_TOP): Fix border.

	* debian/changelog: Update.

2009-06-03  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#120026 - New notification category needed for foreground
	sms/chatmessages

	* src/hd-incoming-events.c (hd_incoming_events_notified):
	* src/hd-notification-manager.c (hd_notification_manager_notify):
	Support foreground sms/chat massags without notification windows.

	* debian/changelog: Update.

2009-06-03  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-task-shortcut.c (hd_task_shortcut_init): Use 5/6 size of
	SystemFont as font size (same as in task launcher).

2009-06-03  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#120622 - Multiple notification is not as expected

	* src/hd-change-background-dialog.c
	  (hd_change_background_dialog_constructed): Support image sets in
	  ~/MyDocs/.images

	* src/hd-incoming-event-window.c
	  (hd_incoming_event_window_update_title_and_amount,
	  hd_incoming_event_window_realize,
	  hd_incoming_event_window_set_property): Add "... " suffix to title
	  of multiple notifications in task switcher.

2009-06-02  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#118133 - Icon for Maemo in Add bookmark of Desktop menu is
	large in size

	* src/hd-bookmark-manager.c (hd_bookmark_manager_add_bookmark_item):
	Scale images to correct size in "Add bookmark" dialog.

	* src/notification-groups.conf: Add definition for class 0 sms message
	category.

	* debian/changelog: Update.

2009-06-01  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Released 0.3.30

	* configure.ac: 0.3.30

2009-05-29  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#112313 - Required implementation details for attaching
	message notifications to thumbnails in task switcher by thread.
	Fixes: NB#98543 - SMS/Chat notification received in switcher view for
	currently running task is not as expected

	* src/hd-incoming-event-window.c: Use relative time instead of
	absolute time for display.

	* src/hd-incoming-events.c: Changed incoming event display. Add
	support for splitting in threads. Add support for amount hint.

	* src/notification-groups.conf: Changed incoming event display.

	* src/test-incoming-event.c (main): Add current time.

	* src/test-notifications.py (emit_notification): Add threading test.

	* debian/changelog: Update.

2009-05-26  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Released 0.3.29

	* configure.ac: 0.3.29

2009-05-26  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#118744 - Time is not shown on previews and notifications.

	* src/hd-incoming-event-window.c
	  (hd_incoming_event_window_set_property): Fix.

2009-05-25  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-hildon-home-dbus.c (hd_hildon_home_dbus_show_edit_menu): Use
	5 min timeout for D-Bus call.

	* src/hd-task-shortcut.c (hd_task_shortcut_desktop_file_changed_cb):
	Fix missing icons.

2009-05-25  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Released 0.3.28

	* configure.ac: 0.3.28

2009-05-21  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#111752 - No notification sounds after a hildon-home crash

	* src/hd-hildon-home-dbus.c (hd_hildon_home_dbus_init):
	* src/hd-notification-manager.c (hd_notification_manager_init): Use
	DBUS_NAME_FLAG_ALLOW_REPLACEMENT and DBUS_NAME_FLAG_REPLACE_EXISTING
	flags for the name request.

2009-05-20  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#108598 - Blank notification after device power up

	* debian/changelog: Update.

2009-05-20  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#109096 - Blank notification received for multplie messages.

	* src/hd-incoming-event-window.c (hd_incoming_event_window_realize):
	Make background transparent.
	* src/hd-notification-manager.c (copy_hash_table_item, idle_emit,
	  hd_notification_manager_notify): Move new notification signal
	  emission into idle handler.

	* debian/changelog: Update.

2009-05-19  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-incoming-event-window.c (PROP_AMOUNT, amount_label, message,
	  time, amount, hd_incoming_event_window_set_cardinal_xwindow_property,
	  hd_incoming_event_window_realize,
	  hd_incoming_event_window_get_property,
	  hd_incoming_event_window_set_property,
	  hd_incoming_event_window_class_init, hd_incoming_event_window_init):
	* src/hd-incoming-events.c (notifications_update_window): Add support
	to display the amount of notifications in the preview windows.

2009-05-18  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#110647 - Incoming Event Style Update
	Fixes: NB#112267 - Time for received notification is not matching with
	device time
	Fixes: NB#115818 - Second text line of incoming notification preview
	goes out of box

	* src/hd-incoming-event-window.c: Use new layout for incoming events.

	* debian/changelog: Update.

2009-05-18  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Released 0.3.27

	* configure.ac: 0.3.27

2009-05-18  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#112403 - Applets are added to config automatically when
	installed

	* src/hd-applet-manager.c (replaced_modules, plugin_module_added_cb,
	  plugin_module_removed_cb, hd_applet_manager_init,
	  hd_applet_manager_finalize): Do not automatically install an applet
	  when the module is just replaced.

	* debian/changelog: Update.

2009-05-14  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-backgrounds.c (volume_monitor2, mount_pre_unmount_cb,
	  volume_pre_unmount_cb, hd_backgrounds_init): Uses GnomeVFS for
	  volume monitoring to make NB#106158 really work.

2009-05-14  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#106158 - Wrong info note is displayed when back cover is
	opened while loading a image as a background
	Fixes: NB#109265 - Home- 'Unable to open.\nFile corrupted'
	§ckct_ni_unable_to_open_file_corrupted§  is not displayed when
	changing background using a corrupted image

	* src/hd-backgrounds.c:
	* src/Makefile.am:
	* src/hd-background-helper.c (deleted):
	* src/hd-background-helper.h (deleted): Rewrite background caching to
	also support png and jpeg images in cache. Started to implement
	changes for Home UI spec 2.3.

	* debian/changelog: Update.

2009-05-11  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	* src/hd-activate-views-dialog.c (hd_activate_views_dialog_init):
	Remove unneeded variable 'default_theme_backgrounds' to fix a Coverity
	finding.

	Released 0.3.26
	* configure.ac: 0.3.26

2009-05-07  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#115257 - hildon-home crash observed

	* src/hd-notification-manager.c (hd_notification_manager_init,
	  hd_notification_manager_notify):
	* src/hd-system-notifications.c (show_next_system_dialog,
	  create_note_dialog, dialog, queue, DialogNotificationClosedData,
	  dialog_notification_closed, system_notifications_notified): Make
	  system notifications a bit more robust.

	* debian/changelog: Update.

2009-05-07  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#115081, NB#113751 - Sound broken when a banner is displayed

	* src/hd-incoming-events.c (hd_incoming_events_notified): Disable
	plugins support for system.note.* category again. It does not work.

	* debian/changelog: Update.

2009-05-06  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	* src/hd-notification-manager.c: Make sure everything passed to g_free
	has been initialised first, to make sure there are no double frees.

2009-05-05  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#111752 - No notification sounds after a hildon-home crash

	* configure.ac:
	* debian/hildon-home.install:
	* src/Makefile.am:
	* src/home.conf.in:
	* src/home.safe-set.in:
	* src/notification.conf.in:
	* src/notification.safe-set.in: Add new safe set of plugin defintions.

	* debian/changelog: Update.

2009-05-05  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#110996 - Desktop, Alternative string to §tana_fi_latest§
	needed for multiple authorization requests

	* src/notification-groups.conf: Use tana_fi_latest_feminine for
	authorization requests

	* debian/changelog: Update.

2009-05-05  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#111148 - Theme-Devel is displayed for two times in choose
	background image dialog

	* src/hd-change-background-dialog.c
	  (hd_change_background_dialog_response,
	  hd_change_background_dialog_init): Set Change background dialog
	  height to 404px.

	* debian/changelog: Update.

2009-05-05  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#110504 - Unable to restore background image with Backup and
	restore application	

	* src/hd-backgrounds.c (queue, current_theme, set_theme_idle_id,
	  load_cache_info_cb, update_backgrounds_from_theme, set_theme_idle,
	  hd_backgrounds_theme_changed, hd_backgrounds_startup,
	  hd_backgrounds_dipose): Add support for updating backgrounds on
	  theme change . This is only done when the _MB_THEME window property
	  on the root window changes.

	* debian/changelog: Update.

2009-05-04  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Released 0.3.25
	* configure.ac: 0.3.25

2009-05-03  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#109445 - Unable to open received SMS when a dialog is opened
	in layout mode

	* src/hd-activate-views-dialog.c (hd_activate_views_dialog_response):
	* src/hd-add-applet-dialog.c (hd_add_applet_dialog_response):
	* src/hd-add-bookmark-dialog.c (hd_add_bookmark_dialog_response):
	* src/hd-add-task-dialog.c (hd_add_task_dialog_response):
	* src/hd-change-background-dialog.c (add_image_dialog_response,
	  hd_change_background_dialog_response):
	* src/hd-hildon-home-dbus.c (select_applets_clicked_cb,
	  select_shortcuts_clicked_cb, select_bookmarks_clicked_cb,
	  manage_views_clicked_cb): Do not use gtk_dialog_run.

	* debian/changelog: Update.

2009-05-03  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#110590 - Authorization requests and SMS get truncated

	* src/hd-incoming-event-window.c (hd_incoming_event_window_init): Fix
	margin.

	* src/hd-notification-manager.c (hd_notification_manager_notify):
	Remove unused code.

	* debian/changelog: Update.

2009-04-30  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#111026 - Notifications, Event notification overview displays
	wrong message

	* src/hd-incoming-events.c: Cleanup code make it more simple and
	easier to understand. Add docs. Remove redundance. Make it easier to
	enhance it for chat/sms account split functionallity. Fix bugs.

	* src/hd-notification-manager.c
	  (hd_notification_manager_call_dbus_callback_with_arg):
	* src/hd-notification-manager.h: Move code from HDIncomingEvents into
	new hd_notification_manager_call_dbus_callback_with_arg function.

	* src/test-notifications.py (emit_notification): Update to add more
	debug output.

	* debian/changelog: Update.

2009-04-30  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Released 0.3.24
	* configure.ac: 0.3.24

2009-04-30  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Fix Coverity issues.
	* src/hd-incoming-events.c (group_activate_notifications): Remove
	unneeded variable 'banner'.
	* src/hd-activate-views-dialog.c (hd_activate_views_dialog_init):
	Remove unneeded variable 'current_theme_backgrounds'.

2009-04-29  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#113822 - Application shortcut label should have hardcoded
	colours

	* src/hd-task-shortcut.c (LABEL_FONT, hd_task_shortcut_class_init):
	Use new hardcoded colours and SmallSystemFont for the label.

2009-04-27  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#111639 - Default icon is not shown for application
	shortcuts.

	* src/hd-task-manager.c (hd_task_manager_load_desktop_file):
	* src/hd-task-shortcut.c (hd_task_shortcut_desktop_file_changed_cb):
	Fallback to default icon if no application icon is available.

2009-04-27  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Released 0.3.23
	* configure.ac: 0.3.23

2009-04-23  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#105139 - Fix broken HildonBanner theming.

	* src/hd-system-notifications.c (create_note_infoprint): Fix Broken
	HildonBanner theming.

	* debian/changelog: Update.

2009-04-22  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#110238 - Let plugins know about notifications of category
	system.note.*

	* src/hd-incoming-events.c (hd_incoming_events_notified): Call plugins
	also for notification with system.note.* category.

	* debian/changelog: Update.

2009-04-17  Adam Endrodi <ext-adam.endrodi@nokia.com>

	NB#109378 Details (sender , time) in the notification window is not
	updated.

	group_update_window_content() calculates all the properties correctly
	but HdIncomingEventWindow forgot to tell the new values to hd.

	* src/hd-incoming-event-window.c (hd_incoming_event_window_set_property):
	  Propagate changes to the time and body to thw X window.

2009-04-20  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#110711, NB#109096 - Blank notifications displayed.

	* src/hd-notification-manager.c (hd_notification_manager_db_commit,
	  hd_notification_manager_db_insert_hint): Fix some warnings.

2009-04-17  Adam Endrodi <ext-adam.endrodi@nokia.com>

	Performance improvements.  In relationship with NB#110711.

	* hd-notification-manager.c:
	  Use prepared statements to write to the database.
	  Batch multiple notifications in one transaction
	  and commit them together.  This way you can have
	  ~20 notifications per second (or more if you're
	  a maniac).
	* hildon-home.c:
	  Exit cleanly on SIGINT.
	* hd-system-notifications.c:
	  Don't print bogus critical warnings when reprocessing
	  the notification database.

2009-04-16  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Released 0.3.22
	* configure.ac: 0.3.22

2009-04-16  Jan Arne Petersen  <jpetersen@openismus.com>

	Nokia: Fixes: NB#111271, NB#111255 - hildon-home crashes

	* src/hd-incoming-events.c (group_update_window_content): Use the real
	  group.
	  (get_mapped_category): Return the default category if not mapped.
	  (show_preview_window, switcher_window_response): Handle
	  notifications without a category.

	* debian/changelog: Update.

2009-04-09  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#108185 - Notification process doesn't check RAM level

	* configure.ac: Add libosso dep
	* debian/control: Add libosso dep

	* src/hd-incoming-events.c (group_notification_closed,
	  group_activate_notifications, group_window_response,
	  preview_window_response): Check for lowmem condition and do not
	  activate notifications in this case.

	* debian/changelog: Update.

2009-04-07  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Released 0.3.21
	* configure.ac: 0.3.21

2009-04-07  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#108935 - Chat and SMS message notifications are not grouped
	together

	* src/hd-incoming-events.c (NOTIFICATION_GROUP_KEY_GROUPED_CATEGORY,
	  NOTIFICATION_GROUP_KEY_GROUPED, grouped_category, switcher_window,
	  notifications, no_window, grouped, ie, group_free,
	  group_update_window_content, switcher_window_response,
	  get_mapped_category, add_switcher_notification, show_preview_window,
	  cmp_category_func, hd_incoming_events_notified,
	  load_notification_groups): Support groups for multiple categories
	  used for sms and chat messages.

	* src/notification-groups.conf: Add messages group.

	* debian/changelog: Update

2009-04-03  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-backgrounds.c (gconf_bgimage_notify): Only show update
	  notification when background is changed via Change background
	  dialog.

2009-04-03  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#109450 - Changed theme is not applied to shortcuts.	

	* src/hd-bookmark-shortcut.c (hd_bookmark_shortcut_init): Redraw if
	  cached surface change.

	* src/hd-cairo-surface-cache.c (HD_CAIRO_SURFACE_CACHE_GET_PRIVATE,
	  _HDCairoSurfaceCachePrivate, table, theme_monitor, CHANGED,
	  LAST_SIGNAL, signals, hd_cairo_surface_cache_dispose,
	  hd_cairo_surface_cache_class_init, theme_changed,
	  hd_cairo_surface_cache_init, hd_cairo_surface_cache_get_surface):
	  Reload new images and update surfaces on theme change

	* src/hd-incoming-event-window.c (hd_incoming_event_window_init):
	  Redraw if cached surface change.

2009-03-31  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-backgrounds.c (copy_pvr_cb, check_queue): Add support to copy
	pre-generated .pvr images.

	* src/hd-change-background-dialog.c
	  (hd_change_background_dialog_response): Fix bug in loop.

	* src/hd-bookmark-shortcut.c (hd_bookmark_shortcut_init): Fix label
	colour, use "hildon-label-shadow". Fixes: NB#106506.

	* debian/changelog: Update

2009-03-31  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Released 0.3.20
	* configure.ac: 0.3.20

2009-03-27  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	* src/hd-incoming-events.c (preview_window_response): Fix use after
	free spotted by Coverity: 'info' was used after freeing it.
	(group_update_window_content): Check for group==NULL before using it.
	Spotted by Coverity.

2009-03-27  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Released 0.3.19
	* configure.ac: 0.3.19

2009-03-26  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#107871 - hildon-home crash related to incoming events.

	* src/hd-incoming-events.c (preview_window_response,
	  show_preview_window): Make sure the notifications are still alive.

	* debian/changelog: Update

2009-03-26  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#106387 - Add contact option is displayed in desktop menu
	even there are no contacts to add

	* src/hd-hildon-home-dbus.c (select_contacts_button,
	  CONTACT_DBUS_CAN_ADD_SHORTCUT, model_row_deleted_cb,
	  can_add_shortcut_notify, hd_hildon_home_dbus_show_edit_menu): Call
	  can_add_shortcut to check if there is a contact to add.

2009-03-26  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#107622 - hildon-home crash trying to open a NULL URL.

	* src/hd-bookmark-shortcut.c (hd_bookmark_shortcut_update_from_gconf,
	  hd_bookmark_shortcut_activate_service): Fix hildon-home crash.

2009-03-26  Adam Endrodi <ext-adam.endrodi@nokia.com>

	* src/hd-incoming-event-window.c:
	  Communicate the event time and message in the X Window properties.
	  The WM will need to know about them because it will need to layout
	  the notification window (thumbnail) entirely on its own.
	* src/test-incoming-event.c:
	  Add longer message text.

2009-03-24  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#107329 - Opening account from grouped mail notifications
	broken.

	* src/hd-incoming-events.c (group_activate_notifications): Create a
	DBus Message to call.

	* src/hd-notification-manager.c
	  (hd_notification_manager_call_message):
	* src/hd-notification-manager.h: Add function to call a DBusMessage.

	* debian/changelog: Update

2009-03-23  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Released 0.3.18
	* configure.ac: 0.3.18

2009-03-10  Adam Endrodi <ext-adam.endrodi@nokia.com>

	NB#95670 PLayed games are not going to pause state ,when
	         sms / message is received

	* src/hd-incoming-event-window.c:
	  Don't accept focus.
	* src/test-incoming-event.c:
	  Make it able to create previews and not previews.

2009-03-20  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#105850 - Implementing fallback for background images.

	* src/hd-backgrounds.c (get_background_for_view_from_theme,
	  get_background_for_view, hd_backgrounds_set_background,
	  hd_backgrounds_get_background): Implementing fallback for background
	  images.
	* src/hd-change-background-dialog.c
	  (hd_change_background_dialog_append_backgrounds,
	  hd_change_background_dialog_constructed,
	  hd_change_background_dialog_response): Image sets set all
	  backgrounds. Support fallback for background images.

	* debian/changelog: Update

2009-03-19  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-incoming-event-window.c (hd_incoming_event_window_realize):
	  Use undecorated rgba windows for incoming events. Fixes: NB#106312.

	* debian/changelog: Update

2009-03-18  Jan Arne Petersen  <jpetersen@openismus.com>

	* debian/control: Add dependencies for localizations.

	* src/hd-bookmark-shortcut.c (hd_bookmark_shortcut_update_from_gconf,
	  hd_bookmark_shortcut_expose_event): Do not scale in expose function.
	  Fixes: NB#102307.
	  (hd_bookmark_shortcut_class_init): Update text/shadow colors. Fixes:
	  NB#106506.

	* debian/changelog: Update

2009-03-17  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Released 0.3.17
	* configure.ac: 0.3.17

2009-03-16  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#105736 - Incoming event window theming.

	* src/Makefile.am:
	* src/hd-incoming-event-window.c (IMAGES_DIR, BACKGROUND_IMAGE_FILE,
	  timeout_id, bg_image, hd_incoming_event_window_realize,
	  hd_incoming_event_window_expose_event,
	  hd_incoming_event_window_dispose,
	  hd_incoming_event_window_class_init, hd_incoming_event_window_init):
	* src/test-incoming-event.c (main): Add incoming event window theming. 

2009-03-13  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#105332 - Fix desktop menu destroy bug.

	* src/hd-hildon-home-dbus.c (hd_hildon_home_dbus_show_edit_menu): Hide
	instead of destroy menu on delete.

2009-03-13  Jan Arne Petersen  <jpetersen@openismus.com>

	* debian/changelog: Fixes: NB#105748

2009-03-12  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/notification-groups.conf: Set logical string to
	tana_fi_msgs_multiple for SMS/chat messages. Fixes: NB#105391

	* debian/changelog: update

2009-03-12  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Released 0.3.16

2009-03-11  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#104709, NB#104479

	* com.nokia.HildonHome.service.in:
	* debian/hildon-home.xsession:
	* org.freedesktop.Notifications.service.in: Use dsmetool to make sure
	only one hildon-home instance is running.

	* debian/changelog: Update.

2009-03-11  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-cairo-surface-cache.c (added):
	* src/hd-cairo-surface-cache.h (added):
	* src/Makefile.am: Add HDCairoSurfaceCache.

	* src/hd-bookmark-shortcut.c (hd_bookmark_shortcut_init): Use
	HDCairoSurfaceCache to cache cairo surfaces. Fixes: NB#104852

	* debian/changelog: Update.

2009-03-10  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Released 0.3.15

2009-03-10  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-incoming-events.c (group_activate_notifications,
	  group_window_response, group_update_window_content, group_update, ie,
	  group, notifications, preview_window_response,
	  close_led_notification, remove_from_preview_list,
	  preview_window_destroy_cb, show_preview_window,
	  hd_incoming_events_notified, hd_incoming_events_finalize): Implement
	  grouped incoming notification previews. Fixes: NB#102328

	* debian/changelog: Update.

2009-03-09  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/notification-groups.conf: Add D-Bus calls for chat-message and
	sms-message (see NB#101536).

2009-03-07  Jan Arne Petersen  <jpetersen@openismus.com>

	* debian/changelog: Update.

	* src/hd-change-background-dialog.c
	  (hd_change_background_dialog_append_backgrounds): Implement theme
	  and imageset prefixes. 

2009-03-07  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-backgrounds.c (hd_backgrounds_set_background,
	  hd_backgrounds_get_background):
	* src/hd-change-background-dialog.c (
	  hd_change_background_dialog_append_backgrounds,
	  hd_change_background_dialog_constructed,
	  hd_change_background_dialog_set_property,
	  hd_change_background_dialog_response,
	  hd_change_background_dialog_class_init,
	  hd_change_background_dialog_init, hd_change_background_dialog_new):
	* src/hd-change-background-dialog.h: Select current background in
	  "Change background" dialog. Fixes: NB#101972, NB#96398

	* src/hd-hildon-home-dbus.c (menu, current_view,
	  change_background_clicked_cb, hd_hildon_home_dbus_show_edit_menu):
	  Use current view.

	* debian/changelog: Update.

2009-03-04  Jan Arne Petersen  <jpetersen@openismus.com>

	* debian/changelog: Cache background images as pvr texture files. Only
	cache files when they are not changed. Fixes: NB#100103

2009-03-04  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-activate-views-dialog.c (hd_activate_views_dialog_init):
	* src/hd-background-helper.c (save_thumbnail_async_thread):
	* src/hd-backgrounds.c (save_thumbnail_cb, read_pixbuf_cb): Create
	  additional thumbnails for the activate views dialog.

2009-03-04  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-incoming-events.c (group_window_response): Fix un-grouped
	  notification case.

2009-03-04  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-background-helper.c (save_thumbnail_async_thread,
	  hd_background_helper_save_thumbnail_async,
	  hd_background_helper_save_thumbnail_finish,
	  save_pvr_texture_async_thread):
	* src/hd-background-helper.h (__HD_BACKGROUND_HELPER_H__):
	* src/hd-backgrounds.c (bg_image, cache_info_contents,
	  save_cached_background_cb, load_cache_info_cb,
	  hd_backgrounds_dipose): Use updates save function from
	  libhildondesktop.

	* src/hd-incoming-events.c (NOTIFICATION_GROUP_KEY_ACCOUNT_CALL,
	  NOTIFICATION_GROUP_KEY_ACCOUNT_HINT,
	  NOTIFICATION_GROUP_KEY_LED_PATTERN, pattern, group_free,
	  preview_window_destroy, hd_incoming_events_set_led_pattern,
	  close_led_notification, hd_incoming_events_notified,
	  load_notification_groups):
	* src/notification-groups.conf: Implement LED pattern support (based
	on a patch by naba.kumar@nokia.com). Fixes: NB#93936

	* src/test-notifications.py (action_invoked_handler): Increase
	timeout.

	* debian/changelog: Update.

2009-03-03  Jan Arne Petersen  <jpetersen@openismus.com>

	* configure.ac:
	* debian/control: Require new libhildondesktop.

	* src/hd-background-helper.c (save_pvr_texture_async_thread,
	  hd_background_helper_save_pvr_texture_async,
	  hd_background_helper_save_pvr_texture_finish):
	* src/hd-background-helper.h: Add helper function to save as pvr
	  texture.

	* src/hd-backgrounds.c:
	* src/hd-backgrounds.h: Save cached backgrounds as pvr texture. Save
	  cache info file and recreate cached backgrounds only when required.

	* src/hd-hildon-home-dbus.c (hd_hildon_home_dbus_show_edit_menu):
	  Remove unneeded casts.
	* src/hd-incoming-events.c (hd_incoming_events_notified,
	  hd_incoming_events_init): Add debug output.

	* src/hd-system-notifications.c (system_notifications_notified):
	  Remove unneeded casts.

	* src/test-notifications.py (action_invoked_handler): Increase
	  timeout.

2009-03-02  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Released 0.3.14

2009-02-27  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-add-applet-dialog.c (hd_add_applet_dialog_init):
	* src/hd-change-background-dialog.c (hd_change_background_dialog_init):
	* src/hd-hildon-home-dbus.c (hd_hildon_home_dbus_show_edit_menu):
	  Update logical strings and menu layout to next Home UI spec.

	* src/hd-incoming-events.c (group_free, group_window_response,
	  load_notification_groups):
	* src/notification-groups.conf: Add support for three states for email
	  notifications. Fixes: NB#103001

	* debian/changelog: Update.

2009-02-26  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hildon-home.c (enable_debug, entries, load_operator_applet,
	  log_ignore_debug_handler, main): Disable g_debug output by default.
	  It can be enabled via --enable-debug. Fixes: NB#103304

	* debian/changelog: Update.

2009-02-26  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-task-manager.c (hd_task_manager_load_desktop_file): Respect
	NoDisplay key. Fixes: NB#103423

	* debian/changelog: Update.

2009-02-25  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/notification-groups.conf: Add D-Bus call to com.nokia.modest
	/com/nokia/modest com.nokia.modest OpenDefaultInbox for multiple mail
	messages. Fixes: NB#103001

	* debian/changelog: Update.

2009-02-24  Jan Arne Petersen  <jpetersen@openismus.com>

	* configure.ac:
	* debian/control: Add mce-dev dependency.

	* src/hd-incoming-events.c: On incoming events request mce to turn
	display backlight on. Fixes: NB#100745

	* debian/changelog: Update.

2009-02-24  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-system-notifications.c (destroy_dialog,
	  hd_system_notifications_dispose,
	  hd_system_notifications_class_init): Free queue on dispose. Fixes:
	  NB#102456

	* debian/changelog: Update.

2009-02-24  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixes: NB#102470

	* src/hd-bookmark-manager.c (parse_idle_id,
	  hd_bookmark_manager_parse_bookmark_files,
	  hd_bookmark_manager_bookmark_files_changed,
	  hd_bookmark_manager_monitor_bookmark_files,
	  hd_bookmark_manager_dipose): Rename parse_thread_id to
	  parse_idle_id.
	* src/hd-bookmark-shortcut.c (LABEL_WIDTH): Enclose in parentheses.
	  (hd_bookmark_shortcut_update_from_gconf, delete_event_cb): Use
	  g_clear_error.

	* debian/changelog: Update.

2009-02-23  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-backgrounds.c (create_cached_background): Fix writing changed
	background to GConf.

2009-02-23  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Released 0.3.13
	* configure.ac: 0.3.13

2009-02-21  Jan Arne Petersen  <jpetersen@openismus.com>

	Make hildon-home maemo-launched. Fixes: NB#101032

	* configure.ac: Add support for --enable-maemo-launcher flag.

	* debian/rules: Add support for maemo launcher.
	
	* debian/control: Add maemo-launcher-dev build-dep.

	* src/Makefile.am: Add maemo launcher CFLAGS/LDFLAGS.

	* src/hildon-home.c: Add g_thread_supported() check.

	* debian/changelog: Update.

2009-02-20  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-activate-views-dialog.c (only_selected,
	  hd_activate_views_dialog_dispose, selection_changed_cb,
	  hd_activate_views_dialog_init): Do not allow to uncheck all active
	  views. Fixes: NB#102427

	* debian/changelog: Update.

2009-02-20  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-bookmark-shortcut.c (hd_bookmark_shortcut_update_from_gconf,
	  hd_bookmark_shortcut_dispose, hd_bookmark_shortcut_expose_event,
	  hd_bookmark_shortcut_init): Use cairo surfaces for the images
	  instead of GdkPixbufs. Fixes: NB#102307

2009-02-20  Jan Arne Petersen  <jpetersen@openismus.com>

	* debian/changelog: Update.

	* src/hd-system-notifications.c (hd_desktop_pulsate_progress_bar,
	  progressbar_destroy_cb, create_note_dialog): Fix Potential crash in
	  hd-system-notifications.c (progress bar pulsing). Remove source on
	  destroy of the progress bar. Fixes: NB#102472

2009-02-20  Jan Arne Petersen  <jpetersen@openismus.com>

	Implement background image caching. Fixes: NB#96528, NB#96532,
	NB#97364, NB#100499.

	* src/Makefile.am: Add new files.
	* src/hd-activate-views-dialog.c (hd_activate_views_dialog_init): Use
	  cached images as thumbnails.
	* src/hd-change-background-dialog.c
	  (hd_change_background_dialog_response): Call into HDBackgrounds to
	  update background.
	* src/hildon-home.c (main): Create HDBackgrounds instance
	* src/hd-backgrounds.c (added):
	* src/hd-backgrounds.h (added): HDBackgrounds cached backgrounds
	  manager.
	* src/hd-background-helper.c (added):
	* src/hd-background-helper.h (added): Async functions to create cached
	  images.

	* debian/changelog: Update.

2009-02-18  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-hildon-home-dbus.c (hd_hildon_home_dbus_init,
	hd_hildon_home_dbus_dispose, select_contacts_clicked_cb): Add call to
	com.nokia.osso_addressbook.add_shortcut. Fixes: NB#102323

2009-02-18  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-applet-manager.c (hd_plugin_info_free,
	  hd_applet_manager_init): Do not leak plugin infos. Fixes: NB#102295
	* src/hd-change-background-dialog.c
	  (hd_change_background_dialog_append_backgrounds): Do not leak
	  strings from key file. Fixes: NB#102298
	* src/hd-incoming-events.c (load_notification_groups): Do not leak
	  key_file and groups_file in error cases. Fixes: NB#102302
	* src/hd-notification-manager.c (hd_notification_manager_call_action,
	  hd_notification_manager_call_dbus_callback): Do not leak D-Bus
	  messages. Fixes: NB#102304
	* src/hd-task-manager.c (hd_task_manager_load_desktop_file): Do not
	  leak desktop_id. Fixes: NB#102296

2009-02-18  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-applet-manager.c (items_configuration_loaded_cb): Fix
	missing error argument (Coverity). Fixes: NB#102259

2009-02-17  Jan Arne Petersen  <jpetersen@openismus.com>

	Use the hildon-desktop AppMgr interface to launch applications. Fixes:
	NB#90450

	* src/hd-task-manager.c (hd_task_manager_dispose): Unref D-Bus AppMgr
	  proxy.
	  (hd_task_manager_get_app_mgr_proxy): Connects to D-Bus AppMgr proxy.
	  (hd_task_manager_launch_task): Use AppMgr to launch the task.

2009-02-16  Jan Arne Petersen  <jpetersen@openismus.com>

	* debian/changelog:
	* debian/rules: Start hildon-home as #20 instead of #22. Fixes:
	NB#101216

2009-02-16  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-incoming-events.c (group_update): Fix extended notifications
	support in task switcher notifications. Fixes: NB#99742

2009-02-13  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-bookmark-shortcut.c (hd_bookmark_shortcut_expose_event):
	Paint the frame in front of the thumbnail.

2009-02-13  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Released 0.3.12
	* configure.ac: 0.3.12

2009-02-13  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-bookmark-shortcut.c: Use RGBA window, update to new theme.

	* src/hd-task-shortcut.c: Use RGBA window.

2009-02-12  Adam Endrodi <ext-adam.endrodi@nokia.com>

	Replay persistent notifications when starting up.
	NB#99955

	* src/hildon-home.c:
	  Load the persistent notifications after initialization complete.
	* src/hd-marshal.list
	* src/hd-notification-manager.h:
	  Export hd_notification_manager_db_load() for hildon-home.c.
	* src/hd-notification-manager.c:
	  Emit "notified" when a persistent notification is loaded.
	  Changed the signature of the "notify" signal to allow for
	  distinguishing notifications being just loaded from the database.
	* src/hd-incoming-events.c:
	  Do not show preview for replayed notifications nor distribute them
	  among the notification plugins.
	  Added add_switcher_notification() for common code.
	  Fixed a crasher caused by not duplicating the key when we add
	  the "persistent" hint to a HDNotification.
	* src/hd-system-notifications.c:
	  Ignore replayed notifications as system notifications cannot be
	  persistently stored.
	* src/test-incoming-event.c:
	  Use hildon_init() and a longer summery text to see
	  if it's properly clipped in tasw.

2009-02-11  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Released 0.3.11
	* configure.ac: 0.3.11

2009-02-11  Adam Endrodi <ext-adam.endrodi@nokia.com>

	* src/hd-incoming-events.c (hd_incoming_events_get):
	  Typo fix that prevented the HdIncomingEvents singleton from ever
	  being created.

2009-02-10  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Released 0.3.10
	* configure.ac: 0.3.10

2009-02-09  Jan Arne Petersen  <jpetersen@openismus.com>

	* debian/changelog: Add some more fixed bugs.

2009-02-09  Jan Arne Petersen  <jpetersen@openismus.com>

	* Makefile.am:
	* debian/hildon-home.install:
	* hildon-home.schemas (deleted): Do not install default .schema file.
	Fixes: NB#101137

	* src/hd-activate-views-dialog.c (hd_activate_views_dialog_init): Use
	  backgrounds from theme if there is no GConf key.

	* src/hd-task-manager.c (hd_task_manager_get_label,
	  hd_task_manager_get_icon): Do not warn.

	* debian/changelog: Update.

2009-02-05  Jan Arne Petersen  <jpetersen@openismus.com>

	Code cleanup.

	* src/hd-activate-views-dialog.c (hd_activate_views_dialog_response,
	  hd_activate_views_dialog_class_init, hd_activate_views_dialog_init):
	* src/hd-add-applet-dialog.c (HD_ADD_APPLET_DIALOG_GET_PRIVATE,
	  _HDAddAppletDialogPrivate, selector, hd_add_applet_dialog_response,
	  hd_add_applet_dialog_class_init, hd_add_applet_dialog_init):
	* src/hd-add-bookmark-dialog.c (hd_add_bookmark_dialog_response,
	  hd_add_bookmark_dialog_class_init, hd_add_bookmark_dialog_init):
	* src/hd-add-task-dialog.c (HD_ADD_TASK_DIALOG_GET_PRIVATE,
	  _HDAddTaskDialogPrivate, selector, hd_add_task_dialog_response,
	  hd_add_task_dialog_class_init, hd_add_task_dialog_init):
	* src/hd-applet-manager.c (hd_applet_manager_dispose,
	  hd_applet_manager_finalize, hd_applet_manager_class_init,
	  hd_applet_manager_get_model):
	* src/hd-bookmark-manager.c (model, user_bookmarks_handle,
	  operator_bookmarks_handle, parse_thread_id,
	  hd_bookmark_manager_add_bookmark_item,
	  hd_bookmark_manager_bookmark_files_changed,
	  hd_bookmark_manager_dipose, hd_bookmark_manager_class_init):
	* src/hd-change-background-dialog.c
	  (hd_change_background_dialog_finalize,
	  hd_change_background_dialog_response,
	  hd_change_background_dialog_class_init,
	  hd_change_background_dialog_init):
	* src/hd-hildon-home-dbus.c (hd_hildon_home_dbus_class_init,
	  hd_hildon_home_dbus_get, hd_hildon_home_dbus_show_edit_menu):
	* src/hd-incoming-events.c (preview_queue, groups, plugins,
	  plugin_manager, group_window_response, group_update,
	  hd_incoming_events_dispose, hd_incoming_events_finalize,
	  hd_incoming_events_class_init, hd_incoming_events_plugin_removed,
	  load_plugins_idle, hd_incoming_events_init, hd_incoming_events_get):
	* src/hd-incoming-events.h (parent):
	* src/hd-notification-manager.c (hd_notification_manager_dispose,
	  hd_notification_manager_finalize, hd_notification_manager_class_init,
	  hd_notification_manager_timeout, hd_notification_manager_get):
	* src/hd-task-manager.c (hd_task_manager_class_init,
	  hd_task_manager_get_icon):
	* src/hildon-home.c (signal_handler, main):

2009-02-05  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	* src/hd-notification-manager.c (hd_notification_manager_next_id): Use
	char instead of gchar for sqlite arguments. Free SQL error with
	sqlite3_free instead of g_free (this fixes a double free found by
	Coverity).
	(hd_notification_manager_db_insert_hint): Free sql_value.
	(hd_notification_manager_message_from_des): Free scanner in case of
	invalid parameters.
	* src/hd-bookmark-manager.c (hd_bookmark_manager_parse_bookmark_files): 
	Free 'root' after getting it from get_bookmark_from_backup() and
	get_root_bookmark().

2009-02-04  Adam Endrodi <ext-adam.endrodi@nokia.com>

	* src/hd-incoming-events.c:
	  Crash fix for the case when two or more notifications arrive
	  in the same category.

2009-02-04  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-incoming-events.c (NOTIFICATION_GROUP_KEY_NO_WINDOW,
	  no_window, hd_incoming_events_notified, load_notification_groups):
	  Add support for No-Window property in the notification groups
	  configuration file. Fixes: NB#98574

	* src/notification-groups.conf: Add No-Window options to incoming-call
	and alarm-event notification.

	* debian/changelog: Update.

2009-02-04  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-bookmark-shortcut.c (LOAD_URL_METHOD): Use open_new_window
	D-Bus method. Fixes: NB#97193

	* configure.ac: 0.3.10

	* debian/changelog: Update.

2009-02-03  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Released 0.3.9
	* configure.ac: 0.3.9

2009-02-03  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-incoming-events.c (group_update): Fix crash.

2009-02-03  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Released 0.3.8
	* configure.ac: 0.3.8

2009-02-02  Jan Arne Petersen  <jpetersen@openismus.com>

	* debian/changelog: Update.

2009-02-02  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-incoming-events.c (NOTIFICATION_GROUP_KEY_EMPTY_SUMMARY,
	  NOTIFICATION_GROUP_KEY_PREVIEW_SUMMARY, empty_summary,
	  preview_summary, group_free, group_update,
	  hd_incoming_events_notified, load_notification_groups): Add handling
	  of preview summary and empty summary strings for notification
	  display. Fixes NB#99742, NB#97906

	* src/notification-groups.conf: Add some more key/values for empty
	summary and preview summary.

	* debian/changelog: Update.

2009-02-02  Jan Arne Petersen  <jpetersen@openismus.com>

	Fixed some memory leaks.

	* src/hd-applet-manager.c (items_configuration_loaded_cb): Free
	plugins (NULL-terminated array of strings).

	* src/hd-notification-manager.c (hd_notification_manager_finalize):
	  Free notifications hashtable.
	  (hd_notification_manager_notify): Free sender.

	* src/hildon-home.c (signal_handler, main): Free notification manager.

	* src/test-notifications.py (emit_notification): Update.

2009-01-30  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hildon-home.c (load_operator_applet, main): Load the operator
	  applet if it is available.

	* debian/changelog: Update.

2009-01-30  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-incoming-event-window.c
	  (hd_incoming_event_window_set_property): Fix icon size.

	* src/hd-notification-manager.c (hd_notification_manager_notify): Do
	not check existence of icon. If no "time" hint is set use current
	time. Fixes NB#97905.

	* src/home.plugins.in: Revert.

2009-01-29  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-applet-manager.c (HDPluginInfo, plugin_removed_cb,
	  plugin_module_added_cb, hd_applet_manager_init,
	  hd_applet_manager_get_model,
	  hd_applet_manager_install_applet_from_desktop_file,
	  hd_applet_manager_install_applet): Add installed applet to Home.
	  Fixes NB#96229
	* src/home.conf.in: Installing of new applets is now done by
	  HDAppletManager.

	* debian/changelog: Update.

2009-01-28  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-task-manager.c (monitors, service, row, HDTaskInfo,
	  DESKTOP_FILE_CHANGED, DESKTOP_FILE_DELETED, LAST_SIGNAL,
	  task_manager_signals, hd_task_info_free,
	  hd_task_manager_load_desktop_file,
	  hd_task_manager_remove_desktop_file, applications_dir_changed,
	  visit_func, hd_task_manager_init, hd_task_manager_dispose,
	  hd_task_manager_finalize, hd_task_manager_class_init): Monitor the
	  applications directory for changes and reload .desktop files if a
	  file fas created/changed or remove task shortcuts i a file was
	  deleted.

	* src/hd-task-shortcut.c (hd_task_shortcut_desktop_file_deleted_cb,
	  hd_task_shortcut_constructed): Send delete event to window if the
	  .desktop file was removed.

	* debian/changelog: Update.

	Fixes NB#93939

2009-01-26  Jan Arne Petersen  <jpetersen@openismus.com>

	* debian/changelog: Update.

	* debian/control: Add upstart-dev to build-deps.

	* debian/rules: Add call to dh_installxsession.

	* debian/hildon-home.xsession (added): Add xsession file from
	system-services.
	* debian/hildon-home.init (deleted): Remove unused init file.

2009-01-20  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Released 0.3.7

2009-01-20  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/notification-groups.conf: Remove D-Bus-Call keys, so the
	ActionInvoked signal is sent by default. Fixes NB#97103

	* src/test-notifications.py (emit_notification,
	  notification_closed_handler, action_invoked_handler): Update
	  test code.

	* configure.ac: 0.3.7

	* debian/changelog: Update

2009-01-20  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Released 0.3.6

	* configure.ac: 0.3.6

2009-01-15  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-activate-views-dialog.c (hd_activate_views_dialog_dispose,
	  response_cb, hd_activate_views_dialog_init): Update for changed
	  GConf storage (in a list) of the active views.

2009-01-14  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-notification-manager.c (hd_notification_manager_init): Change
	directory for the persistent notifications db to
	~/.config/hildon-desktop and create it if not exist.

2009-01-13  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Released 0.3.5

	* configure.ac: 0.3.5

2009-01-12  Jan Arne Petersen  <jpetersen@openismus.com>

	* debian/changelog: Update.

	* src/hd-incoming-events.c (group_window_response): Invoke default
	action for notifications in switcher when no D-Bus callback is
	defined. Fixes: NB#97103
	  (load_notification_groups): Make D-Bus callback optional.

2009-01-07  Jan Arne Petersen  <jpetersen@openismus.com>

	* debian/changelog: Added fixed bug.

2009-01-05  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-change-background-dialog.c (response_cb): Select the
	background image only for the current view. Fixes NB#96380

	* debian/changelog: Update changelog.

2009-01-05  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-bookmark-manager.c (hd_bookmark_manager_parse_bookmark_files,
	  hd_bookmark_manager_bookmark_files_changed,
	  hd_bookmark_manager_monitor_bookmark_files,
	  hd_bookmark_manager_get): Monitor bookmark files for changes and
	  parse them again. Fixes NB#95283

	* debian/changelog: Update changelog.

2009-01-05  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-bookmark-shortcut.c
	  (hd_bookmark_shortcut_update_from_gconf): Only try to load thumbnail
	  icon when there was no error.
	  (hd_bookmark_shortcut_dispose): Add missing unrefs.
	  (hd_bookmark_shortcut_expose_event): Only draw thumbnail icon if
	  available. Fixes NB#96683

	* debian/changelog: Update changelog.

2008-12-29  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Released 0.3.4

	* configure.ac: 0.3.4

2008-12-19  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hildon-home.c (main): Initialize Hildon with hildon_init ().

2008-12-18  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/Makefile.am:
	* src/hd-task-manager.c (hd_task_manager_load_desktop_file):
	* src/home.conf.in:
	* src/home-w50.plugins (deleted): Remove Xmas workarounds.

2008-12-17  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Released 0.3.3

2008-12-17  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-bookmark-shortcut.c (hd_bookmark_shortcut_realize):
	* src/hd-task-shortcut.c (hd_task_shortcut_realize): Use rgb windows
	as long as rgba windows are not shown on the device.

2008-12-16  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Released 0.3.2

2008-12-16  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-bookmark-shortcut.c (hd_bookmark_shortcut_class_init,
	  hd_bookmark_shortcut_init): Add shadow.
	* src/hd-task-shortcut.c (hd_task_shortcut_class_init,
	  hd_task_shortcut_init): Add shadow.

2008-12-15  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-bookmark-shortcut.c (hd_bookmark_shortcut_expose_event,
	  hd_bookmark_shortcut_init): Use background image from theme.

2008-12-15  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Released 0.3.1

2008-12-15  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-activate-views-dialog.c (hd_activate_views_dialog_init): Fix
	  localized strings.
	* src/hd-change-background-dialog.c (response_cb,
	  hd_change_background_dialog_init): Fix localised strings.

	* src/hd-bookmark-shortcut.c (gconf_client, thumbnail_icon,
	  hd_bookmark_shortcut_update_from_gconf, hd_bookmark_shortcut_realize,
	  rounded_rectangle, hd_bookmark_shortcut_expose_event,
	  hd_bookmark_shortcut_class_init, hd_bookmark_shortcut_init): Draw
	  nicer shortcut.

	* src/hd-task-shortcut.c (hd_task_shortcut_expose_event): Use a
	  smaller curve.

2008-12-15  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-bookmark-manager.c (hd_bookmark_manager_add_bookmark_item):
	Use thumbnail instead of favicon.

2008-12-15  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-task-shortcut.c (hd_task_shortcut_realize, rounded_rectangle,
	  hd_task_shortcut_expose_event, hd_task_shortcut_class_init,
	  hd_task_shortcut_init): Use nicer transparent background for task
	  shortcuts.

2008-12-12  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-change-background-dialog.c (response_cb):
	* src/hd-hildon-home-dbus.c (select_applets_clicked_cb,
	  select_shortcuts_clicked_cb, select_bookmarks_clicked_cb,
	  select_contacts_clicked_cb, manage_views_clicked_cb): Pointer grab
	  and ungrab for system modal dialogs is done in HDCompMgr now.

2008-12-12  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/Makefile.am:
	* src/home-w50.plugins:
	* src/home.conf.in:
	* src/home.plugins.in: xmas workaround (fix around
	  mediaplayerhomeapplet bug).

	* src/hd-hildon-home-dbus.c (hd_hildon_home_dbus_show_edit_menu):
	  fix comment.

2008-12-11  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-activate-views-dialog.c:
	* src/hd-activate-views-dialog.h: Implement "Activate views" dialog (gtk
	  version).

	* src/Makefile.am: Add hd-activate-views-dialog.[ch] to sources.

	* src/hd-hildon-home-dbus.c (manage_views_clicked_cb): Use "Activate
	  views" dialog

2008-12-11  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-change-background-dialog.c (response_cb,
	  hd_change_background_dialog_append_backgrounds,
	  hd_change_background_dialog_init): Fix for new themes directory
	  layout. Fix for new bg iamge gconf paths.

2008-12-10  Jan Arne Petersen  <jpetersen@openismus.com>

	* debian/changelog: Update changelog.

	* src/hd-notification-manager.c (hd_notification_manager_notify): Do
	  not assert that an icon is set. Fixes NB#94962

2008-12-10  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-change-background-dialog.c
	  (hd_change_background_dialog_dispose): Unref proxy.
	  (hd_change_background_dialog_set_property,
	   hd_change_background_dialog_class_init): Add proxy property
	  (response_cb): Fix selecting image. Fixes NB#95247
	  (hd_change_background_dialog_init,
	   hd_change_background_dialog_new): Add a D-Bus proxy argument and
	   property.
	* src/hd-change-background-dialog.h (hd_change_background_dialog_new):
	  Add a D-Bus proxy argument.

	* src/hd-hildon-home-dbus.c (change_background_clicked_cb):

2008-12-10  Jan Arne Petersen  <jpetersen@openismus.com>

	* debian/changelog: Update changelogs

2008-12-09  Jan Arne Petersen  <jpetersen@openismus.com>

	* debian/changelog: Update changelog.

2008-12-09  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-incoming-events.c (hd_incoming_events_notified): Do not show
	a visual notification for incoming-call notifications. Fixes NB#94960.

2008-12-09  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-bookmark-manager.c
	(hd_bookmark_manager_parse_bookmark_files): Really fix the broken
	parse bookmark function. Fixes NB#95149

2008-12-09  Jan Arne Petersen  <jpetersen@openismus.com>

	* configure.ac: Increase required libhildondesktop version.

	* debian/control: Increase required libhildondesktop1-dev version.

	* src/hd-bookmark-manager.c
	  (hd_bookmark_manager_parse_bookmark_files): Do not use broken backup
	  bookmarks function (fixes segfault).
	  (hd_bookmark_manager_install_bookmark): Moved the code to create a
	  bookmark shortcut to libhildondesktop.

2008-12-08  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/notification-groups.conf: Change destination of email-message
	category to Modest.

2008-12-08  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-bookmark-manager.c
	  (hd_bookmark_manager_parse_bookmark_files): Only call
	  hd_bookmark_manager_add_bookmark_item if the bookmarks file was
	  parsed successfully.

2008-12-05  Jan Arne Petersen  <jpetersen@openismus.com>

	* com.nokia.HildonHome.service.in:
	* org.freedesktop.Notifications.service.in: Add D-Bus .service files.

	* Makefile.am:  Install the .service files.

	* configure.ac: Add .service files.

	* debian/hildon-home.install: Install .service file in package.

2008-12-04  Jan Arne Petersen  <jpetersen@openismus.com>

	* debian/changelog: Update.

	* src/hd-incoming-events.c (group_update): Add missing cast to gint64.

	* src/notification-groups.conf: Add more groups. Fixes NB#94404
	  NB#94408

2008-12-03  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-add-task-dialog.c (hd_add_task_dialog_init): Use pixbuf in
	  the icon renderer in the application list.

	* src/hd-task-manager.c (hd_task_manager_load_desktop_file,
	  hd_task_manager_init): Only scan .desktop files of type Application.
	  Store a pixbuf of the icon for the Add shortcut dialog. Add -w50
	  workaround. Fixes NB#95228

2008-12-03  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Released 0.3.0

2008-12-02  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-change-background-dialog.c:
	  (hd_change_background_dialog_class_init, get_image_label_from_uri,
	  response_cb, hd_change_background_dialog_init): Implement getting
	  list of available background images and make it possible to select
	  them.

2008-12-02  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-hildon-home-dbus.c (hd_hildon_home_dbus_show_edit_menu):
	Add call to ungrab pointer (moved from hildon-desktop).

2008-11-28  Jan Arne Petersen  <jpetersen@openismus.com>

	* configure.ac: Add hilon-fm-2 to the deps.

	* src/Makefile.am:
	* src/hd-background-dialog.c (deleted):
	* src/hd-background-dialog.h (deleted):
	* src/hd-change-background-dialog.c (added):
	* src/hd-change-background-dialog.h (added): Implement the new UI of the
	  change background dialog. Fixes NB#93117

	* src/hd-hildon-home-dbus.c: Fix grabs and ungrabs.

2008-11-28  Jan Arne Petersen  <jpetersen@openismus.com>

	* debian/changelog: Update entry.

	* src/hd-add-bookmark-dialog.c (hd_add_bookmark_dialog_init): Use a
	pixbuf and a text cell renderer to also display the bookmark icon.

	* src/hd-add-task-dialog.c (hd_add_task_dialog_init): Use a pixbuf and
	a text cell renderer to also display the task icon.

2008-11-28  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-task-manager.c (HD_KEY_FILE_DESKTOP_KEY_TRANSLATION_DOMAIN):
	Use X-Text-Domain.

2008-11-27  Jan Arne Petersen  <jpetersen@openismus.com>

	* debian/changelog: Update changelog.

2008-11-27  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-applet-manager.c (items_configuration_loaded_cb): Only show
	  not yet selected applets in dialog.
	  (delete_event_cb): Remove applet from configuration if it is closed,
	  which means removed from Home.
	  (plugin_added_cb, plugin_removed_cb, run_idle, hd_applet_manager_init,
	  hd_applet_manager_install_applet, hd_applet_manager_remove_applet):
	  Use only one plugin manager to load applets and manage the applets
	  on Home.
	* src/hd-hildon-home-dbus.c (hd_hildon_home_dbus_show_edit_menu): Only
	  show menu item if list of applets is not empty.
	* src/hildon-home.c (load_plugins_idle, main): Move plugin manager to
	  load applets to HDAppletManager.

2008-11-26  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-task-shortcut.c (hd_task_shortcut_init): Update layout.

2008-11-26  Jan Arne Petersen  <jpetersen@openismus.com>

	* configure.ac: Increase version.

	* debian/changelog: Add new entry for next release.

2008-11-26  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-bookmark-manager.c: Store label/icon/URL in GConf for
	bookmark shortcuts.

	* src/hd-bookmark-shortcut.c: Update layout according to new layout
	spec. Load label/icon/URL from GConf.

	* src/hd-hildon-home-dbus.c (hd_hildon_home_dbus_show_edit_menu): Only
	show the "Add bookmark" menu item when a bookmark is available.

	* src/hildon-home.c (main): Create a HDBookmarkManager instance here.

2008-11-25  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-add-task-dialog.c (hd_add_task_dialog_dispose,
	  hd_add_task_dialog_init): Fix dialog title. Use GtkTreeModel instead
	  of GtkListStore.

	* src/hd-hildon-home-dbus.c (manage_views_clicked_cb,
	  model_row_inserted_cb, model_row_deleted_cb,
	  hd_hildon_home_dbus_show_edit_menu): Show Add shortcut menu item
	  only when the list of installable shortcuts is not empty.

	* src/hd-task-manager.c: Add functions to activate a task from
	HdTaskShortcut. Add functions to export label and icon of a task for
	shortcuts. Add filtered tree model to only show tasks which are not
	installed as shortcut yet. Fixes NB#93164.

	* src/hd-task-manager.h: Add declarations for new functions.

	* src/hd-task-shortcut.c: Do not parse .desktop files but use the
	information avaiable by HDTaskManager.

2008-11-25  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Released 0.2.1
	
2008-11-24  Jan Arne Petersen  <jpetersen@openismus.com>

	* debian/changelog: Update changelog.

2008-11-21  Jan Arne Petersen  <jpetersen@openismus.com>

	* configure.ac: Add osso-bookmark-engine dependency. Add check for
	ftw.h

	* src/Makefile.am: Add new files as SOURCES. Add D-Bus glib-server
	glue generation.

	* src/hd-notification-manager.c (hd_notification_manager_finalize):
	Chainup.

	* src/hd-notification-manager.xml: Update annotation.

	* src/hildon-home.c (main): Add D-Bus interface.

	* src/hd-add-applet-dialog.c (added):
	* src/hd-background-dialog.c (added):
	* src/hd-add-applet-dialog.h (added):
	* src/hd-background-dialog.h (added):
	* src/hd-applet-manager.c (added):
	* src/hd-hildon-home-dbus.c (added):
	* src/hd-applet-manager.h (added):
	* src/hd-hildon-home-dbus.h (added):
	* src/hd-task-manager.c (added):
	* src/hd-hildon-home-dbus.xml (added):
	* src/hd-task-manager.h (added):
	* src/hd-add-task-dialog.c (added):
	* src/hd-add-task-dialog.h (added): Move Edit menu from
	hildon-desktop.

	* src/hd-bookmark-manager.c (added):
	* src/hd-bookmark-manager.h (added):
	* src/hd-add-bookmark-dialog.c (added):
	* src/hd-add-bookmark-dialog.h (added): Implement Add bookmark dialog.

2008-11-18  Jan Arne Petersen  <jpetersen@openismus.com>

	* configure.ac:
	* debian/changelog:
	* debian/control: Increase version to 0.2.1. Depend on latest
	libhildondesktop1.

	* debian/rules: Do not call configure via autogen.sh

	* src/hd-bookmark-shortcut.c (hd_bookmark_shortcut_get_applet_id,
	  hd_bookmark_shortcut_class_init): Implement virtual get_applet_id()
	  function to add a prefix.
	* src/hd-task-shortcut.c (hd_task_shortcut_get_applet_id,
	  hd_task_shortcut_class_init): Implement virtual get_applet_id()
	  function to add a prefix.

2008-11-17  Kimmo Hämäläinen <kimmo.hamalainen@nokia.com>

	Released 0.2.0
	
	* Makefile.am, debian/hildon-home.install: change Gconf schema
	install directory.

	* debian/rules: run ./autogen.sh

2008-11-12  Jan Arne Petersen  <jpetersen@openismus.com>

	* Makefile.am: Install hildon-home.schemas.

	* configure.ac: Add GConf related variables.

	* debian/hildon-home.install: Install hildon-home.schemas into
	package.

	* debian/rules: Use gnome rules to get dh_gconf run.

	* hildon-home.schemas: Add some schemas for bookmark-shortcuts and
	task-shortcuts keys.

2008-11-12  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hildon-home.c (main): Add gconf dir watch, so hildon-home gets
	notified about changes.

2008-11-11  Jan Arne Petersen  <jpetersen@openismus.com>

	* configure.ac: Increase version to 0.2.0. Require libhildondesktop-1
	2.1.7.

	* debian/changelog: Add entry for 0.2.0~unreleased.

	* debian/control: Depend on newer libhildondesktop1-dev.

	* src/hd-bookmark-shortcut.c (hd_bookmark_shortcut_set_uri,
	  hd_bookmark_shortcut_constructor, hd_bookmark_shortcut_finalize,
	  hd_bookmark_shortcut_activate,
	  hd_bookmark_shortcut_class_init):
	* src/hd-bookmark-shortcut.h: Remove uri property and use plugin-id
	instead.

	* src/hd-task-shortcut.c (hd_task_shortcut_set_desktop_id,
	  hd_task_shortcut_constructor, hd_task_shortcut_finalize,
	  hd_task_shortcut_class_init):
	* src/hd-task-shortcut.h: Remove desktop-id property and use plugin-id
	instead.

	* src/hildon-home.c (main): Use new generic shortcuts API.

	* src/hd-shortcuts.c (deleted):
	* src/hd-shortcuts.h (deleted): Moved to libhildondesktop1.

	* src/Makefile.am: Remove hd-shortcuts.[ch].

2008-11-07  Jan Arne Petersen  <jpetersen@openismus.com>

	Incoming events enhancements. This patch makes HDIncomingEventWindow:s
	more informative for the window manager.

	patch by: adam.endrodi@blumsoft.eu

	* src/hd-incoming-event-window.c
	  (hd_incoming_event_window_set_string_xwindow_property): Add a
	  convenience function to set a string type window property.
	  (hd_incoming_event_window_realize): Set additional window
	  properties.
	  (hd_incoming_event_window_get_property,
	  hd_incoming_event_window_set_property,
	  hd_incoming_event_window_class_init): Add destination property.
	  (hd_incoming_event_window_init): Add widget names (for theming).
	  (hd_incoming_event_window_new): Add destination argument.
	* src/hd-incoming-event-window.h: Add destination argument to _new
	  fucntion.
	* src/hd-incoming-events.c (group_free, group_update,
	  preview_window_response, hd_incoming_events_notified,
	  load_notification_groups): Add destination key.
	* src/notification-groups.conf: Add Destination key.
	* src/test-incoming-event.c (response, main): Add response handler

2008-11-07  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-notification-manager.c (hd_notification_manager_notify):
	Check for opened database.

2008-11-04  Jan Arne Petersen  <jpetersen@openismus.com>

	* debian/hildon-home.init: Fix su usage in scratchbox.

	* debian/control:
	* debian/hildon-home.install:
	* debian/rules: Use cdbs.

	* debian/conffiles (deleted): Remove (lintian).

2008-11-03  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-incoming-events.c (group_free, group_update): Rename field to
	  text_domain.
	  (load_notification_groups): Use symbolic names for key file keys.
	* src/notification-groups.conf: Use new key names.

2008-10-31  Jan Arne Petersen  <jpetersen@openismus.com>

	* debian/compat:
	* debian/conffiles:
	* debian/control:
	* debian/rules: Fix lintian warnings.

2008-10-31  Jan Arne Petersen  <jpetersen@openismus.com>

	* debian/changelog: Update changelog for 0.1.3 release.

2008-10-31  Jan Arne Petersen  <jpetersen@openismus.com>

	* debian/changelog: Release 0.1.3

	* debian/control: Update requirements.

2008-10-30  Jan Arne Petersen  <jpetersen@openismus.com>

	* debian/changelog: Update for 0.1.3 release.

	* debian/control: Update libhildondesktop1-dev requirement.

	* src/hildon-home.c (main): Use the new simplified HDConfigFile API.

2008-10-29  Jan Arne Petersen  <jpetersen@openismus.com>

	* configure.ac: Update version to 0.1.3. Require libhildondesktop
	2.1.6.

	* src/hildon-home.c (main): Do not unref HDConfigFile instances.

2008-10-19  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-bookmark-shortcut.c (hd_bookmark_shortcut_new): Replace
	dashes with slashes in the ID.

2008-10-18  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-bookmark-shortcut.c:
	* src/hd-bookmark-shortcut.h: Add basic Bookmark Shortcut
	implementation.

	* src/hd-shortcuts.c: Add support for bookmark shortcuts.

	* src/Makefile.am: Add new files.

2008-10-18  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/hd-incoming-events.c (group_free): Free translation domain.
	  (group_update): Use dgettext() and translation domain instead of
	  gettext().
	  (load_notification_groups): Load the optional translation domain
	  value (Translation-Domain).

	* src/hd-task-shortcut.c (hd_task_shortcut_load_from_file): Load the
	optional translation domain value and use dgettext() instead of
	gettext().

2008-10-16  Jan Arne Petersen  <jpetersen@openismus.com>

	* configure.ac:
	* debian/changelog: Release 0.1.2

	* debian/conffiles: Remove empty line.

2008-10-07  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/Makefile.am: Add hd-shortcuts.[ch] and hd-task-shortcut.[ch].

	* src/hd-shortcuts.c:
	* src/hd-shortcuts.h: Add support for Task Shortcut configuration via
	GConf.

	* src/hd-task-shortcut.c:
	* src/hd-task-shortcut.h: Add support for Task Shortcut applets.

	* src/hildon-home.c: Add support for Task Shortcut applets.

2008-09-24  Jan Arne Petersen  <jpetersen@openismus.com>

	* debian/changelog: Release 0.1.0

2008-09-24  Jan Arne Petersen  <jpetersen@openismus.com>

	* debian/control: Update require libhildondesktop1-dev version.

2008-09-24  Jan Arne Petersen  <jpetersen@openismus.com>

	* debian/hildon-home.init:
	* debian/rules: Added hildon-home startup script.

2008-09-24  Jan Arne Petersen  <jpetersen@openismus.com>

	* configure.ac: Add gettext support.

	* src/notification-groups.conf: Add configuration file for
	notification groups.

	* src/Makefile.am: Add notification-groups.conf.

	* src/hd-incoming-event-window.c:
	* src/hd-incoming-event-window.h: Change type of time property from
	gchar* to gint64.

	* src/hd-notification-manager.c:
	* src/hd-notification-manager.h: Use the new HDNotification class from
	libhildondesktop.

	* src/hd-incoming-events.c:
	* src/hd-incoming-events.h: Use HDNotifications instead of
	notification ids. Add support for notification groups. Add support for
	notification windows for the switcher window. Add support for
	notification plugins.

	* src/hd-system-notifications.c:
	* src/hd-system-notifications.h: Use HDNotifications instead of
	notification ids.

	* src/hildon-home.c (main): Add locale support. Add support for
	notification plugins.

	* src/test-incoming-event.c (main): Update to new API.

	* src/test-notifications.py: Add test for notification groups.

2008-09-20  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/Makefile.am: Install notification-groups.conf.

	* src/hd-incoming-events.c (update_group): Add initial support to
	  group switcher windows.
	  (preview_window_response): Show a switcher window if the preview
	  was not clicked.
	  (load_notification_groups): Load the notification groups
	  configuration file.

	* src/notification-groups.conf: Add sample notification groups file.

	* src/test-notifications.py: Update category to match notification
	group.

2008-09-19  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/Makefile.am: Add test-incoming-event program.

	* src/hd-incoming-event-window.c: Add response signal. Add support for
	preview timeouts. Use 

	* src/hd-incoming-event-window.h: Add response signal.

	* src/hd-incoming-events.c:
	* src/hd-incoming-events.h: Add initial support for incoming events.

	* src/hd-notification-manager.c:
	* src/hd-notification-manager.h:
	* src/hd-system-notifications.c:
	* src/hd-system-notifications.h: Update Copyright text

	* src/hildon-home.c (main): Remove the test notification window.

	* src/test-incoming-event.c: Add test for a notification window in the
	task switcher

	* src/test-notifications.py: Add a test for notifications.

2008-09-18  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/Makefile.am: Add hd-incoming-event-window.[ch] to SOURCES.

	* src/hd-incoming-event-window.c:
	* src/hd-incoming-event-window.h: Add HDIncomingEventWindow class for
	incoming event display.

	* src/hildon-home.c (main): Create and display an example
	HDIncomingEventWindow.

2008-09-18  Jan Arne Petersen  <jpetersen@openismus.com>

	* configure.ac: Add check for dbus-binding-tool

	* src/Makefile.am: Add rules for hd-marshal.[ch] generation.

	* src/hd-marshal.list: Add marshal definition for notification-sent
	and notification-updated signals.

	* src/hd-notification-manager.c (hd_notification_manager_next_id):
	  Don't crash if database could not be opened.
	  (hd_notification_manager_class_init): Add notification-sent and
	  notification-updated signals.
	  (hd_notification_manager_notify): Emit notification-sent and
	  notification-updated signals.
	* src/hd-notification-manager.h: Add notification-sent and
	  notification-updated signals.

	* src/hd-system-notifications.c:
	* src/hd-system-notifications.h: Add handling of system.note.infoprint
	and system.note.dialog notifications (from Diablo).

	* src/hildon-home.c (main): Create HDNotificationManager and
	HDSystemNotifications objects.

2008-09-16  Jan Arne Petersen  <jpetersen@openismus.com>

	* src/Makefile.am:
	* src/hd-notification-manager.c (hd_notification_manager_init):
	* src/hd-notification-manager.xml (added):
	* src/notification-manager.xml (deleted): Rename
	notification-manager.xml to hd-notification-manager.xml. Use
	hd_notification_manager as prefix for the generated file. Use
	hd-notification-manager-glue.h as the generated file name.

2008-09-15  Jan Arne Petersen  <jpetersen@openismus.com>

	* configure.ac:
	* src/Makefile.am:
	* src/home.conf.in:
	* src/home.plugins.in: Add configuration files for the the home applet
	plugin manager.

	* debian/hildon-home.install: Install the new configuration files.

	* src/hildon-home.c (home_plugin_added, home_plugin_removed, main):
	Add support for the home applet plugins.

2008-09-15  Jan Arne Petersen  <jpetersen@openismus.com>

	* configure.ac: Require libhildondesktop >= 2.1.4.

	* src/hildon-home.c (signal_handler): Use hd_stamp_file_finalize
	function.
	(main): Use hd_stamp_file_init function.

2008-09-12  Jan Arne Petersen  <jpetersen@openismus.com>

	* autogen.sh:
	* AUTHORS:
	* COPYING:
	* INSTALL:
	* NEWS:
	* README:
	* Makefile.am:
	* configure.ac:
	* src/Makefile.am: Add files required by automake.

	* src/hildon-home.c: Add hildon-home application. Implement
	notifications.

	* src/hd-notification-manager.c:
	* src/hd-notification-manager.h:
	* src/notification-manager.xml: Add support for
	org.freedesktop.Notifications D-Bus API. Based on diablo
	hildon-desktop code. Add support for notification plugins.

	* src/notification.conf.in: Add configuration for notification
	plugins.

	* debian/changelog:
	* debian/control:
	* debian/hildon-home.install:
	* debian/rules: Add debian package files.

